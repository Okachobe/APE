language: php

services:
    - docker
    
php:
    - 7.2
    - 7.3

before_script:
    - curl -sSfL -o ~/.phpenv/versions/hhvm/bin/phpunit https://phar.phpunit.de/phpunit-5.7.phar
    - travis_retry composer self-update
      #    - travis_retry composer global require "fxp/composer-asset-plugin:~1.0.0"
    - travis_retry composer install --prefer-source --no-interaction
    - docker build -t ape .

script:
    - composer test

after_success:
    - bash <(curl -s https://codecov.io/bash)

